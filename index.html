<!DOCTYPE html>
<html lang="en">
<head>

  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-6HB5H41GJ8"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-6HB5H41GJ8');
</script>

<meta charset="UTF-8">
<meta name="google" content="notranslate">
<meta name="rating" content="general">
<meta name="distribution" content="global">


<!-- SEO & Meta Tags -->
<meta name="description" content="Play 2048 online for free - the ultimate free puzzle game! Merge tiles, reach 2048, and beat your high score. Fast, mobile-friendly, with multiple themes. No ads, no signup required.">
<meta name="keywords" content="2048 play, 2048 game, play 2048 online, free 2048, 2048 puzzle game, merge tiles game, brain game, number puzzle, tile puzzle, free puzzle game online, 2048 online free">
<meta name="author" content="2048play.in">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<meta name="theme-color" content="#d4a574">
<meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
<meta name="language" content="English">
<meta property="og:title" content="2048 Play Online - Free Puzzle Game | Merge Tiles & Win">
<meta property="og:description" content="Play the classic 2048 puzzle game online for free! No ads, no signup. Multiple themes, high-score tracking, and smooth gameplay. Play now on desktop or mobile!">
<meta property="og:type" content="website">
<meta property="og:url" content="https://2048play.in/">
<meta property="og:image" content="https://2048play.in/images/fevicon_2048.png">
<meta property="og:site_name" content="2048play.in">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="2048 Play Online - Free Puzzle Game">
<meta name="twitter:description" content="Play 2048 online free! Merge tiles, reach 2048, beat your high score. No ads, mobile-friendly, multiple themes.">
<meta name="twitter:image" content="https://2048play.in/images/fevicon_2048.png">
<meta name="p:domain_verify" content="2af4fbab986f6afba9315e4263d823f6"/>

<title>2048 Play Online - Free Puzzle Game | Merge Tiles & Beat Your Score</title>
<link rel="icon" href="images/fevicon_2048.png" type="image/png">
<link rel="shortcut icon" href="images/fevicon_2048.png">
<link rel="apple-touch-icon" href="images/fevicon_2048.png">
<link rel="canonical" href="https://2048play.in/">



<!-- JSON-LD Structured Data for SEO -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": "2048 Play",
  "description": "Play 2048 online for free - the ultimate free puzzle game! Merge tiles, reach 2048, and beat your high score.",
  "url": "https://2048play.in",
  "applicationCategory": "Game",
  "image": "https://2048play.in/images/fevicon_2048.png",
  "author": {
    "@type": "Organization",
    "name": "2048play.in"
  },
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "USD"
  },
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "4.8",
    "ratingCount": "1000",
    "bestRating": "5",
    "worstRating": "1"
  }
}
</script>

<!-- Additional SEO Meta Tags -->
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="2048 Play">

<style>
/* =========================
   GLOBAL RESET
========================= */
* {
  box-sizing: border-box;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  user-select: none;
}

html, body {
  width: 100%;
  height: 100%;
  overflow-x: hidden;
}

body {
  margin: 0;
  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  overscroll-behavior: none;
  transition: background 0.3s ease, color 0.3s ease;
}

/* =========================
   BISCUIT THEME (DEFAULT)
========================= */
body.biscuit {
  background: linear-gradient(135deg, #fff2dd, #f1cfa5, #e0b07a);
  color: #3d2b1f;
}

/* HEADER */
body.biscuit header {
  background: linear-gradient(135deg, #e09f3e, #9e2a2b);
  box-shadow: 0 6px 18px rgba(158, 42, 43, 0.4);
}

body.biscuit nav a {
  color: #fff;
  font-weight: 700;
}

body.biscuit nav a:hover {
  background: rgba(255,255,255,0.3);
}

/* GAME CARD */
body.biscuit .game {
  background: linear-gradient(135deg, #fff1dc, #f3cfa6);
  box-shadow: 0 15px 40px rgba(158, 42, 43, 0.35);
  border: 3px solid #9e2a2b;
}

/* BIG GAME TITLE */
.game-title {
  text-align: center;
  font-size: 48px;
  font-weight: 900;
  letter-spacing: 4px;
  margin-bottom: 10px;
  color: #9e2a2b;
  text-shadow: 2px 2px 0 #ffd166, 4px 4px 10px rgba(0,0,0,0.3);
}

/* SCORE BOXES */
body.biscuit .box {
  background: linear-gradient(135deg, #ffd166, #f77f00);
  color: #4e2c12;
  font-weight: 900;
  border: 3px solid #9e2a2b;
  border-radius: 12px;
  box-shadow: 0 6px 14px rgba(0,0,0,0.3);
}

/* GRID */
body.biscuit .grid {
  background: linear-gradient(135deg, #9e2a2b, #540b0e);
  padding: 12px;
  border-radius: 12px;
}

/* TILES */
body.biscuit .tile {
  background: #fff3cd;
  color: #3d2b1f;
  font-weight: 900;
  box-shadow: inset 0 -4px 0 rgba(0,0,0,0.25);
}

body.biscuit .tile[data-value="2"] { background: #fff3cd; }
body.biscuit .tile[data-value="4"] { background: #ffe6a7; }
body.biscuit .tile[data-value="8"] { background: #ffd166; }
body.biscuit .tile[data-value="16"] { background: #fcbf49; }
body.biscuit .tile[data-value="32"] { background: #f77f00; color:#fff; }
body.biscuit .tile[data-value="64"] { background: #d62828; color:#fff; }
body.biscuit .tile[data-value="128"] { background: #9e2a2b; color:#fff; font-size:20px;}
body.biscuit .tile[data-value="256"] { background: #6a040f; color:#fff; font-size:20px;}
body.biscuit .tile[data-value="512"] { background: #370617; color:#fff; font-size:20px;}
body.biscuit .tile[data-value="1024"] { background: #03071e; color:#ffd166; font-size:18px;}
body.biscuit .tile[data-value="2048"] {
  background: linear-gradient(135deg, gold, orange);
  color: #4e2c12;
  box-shadow: 0 0 20px gold;
}

/* BUTTONS */
body.biscuit select,
body.biscuit button {
  background: linear-gradient(135deg, #ffd166, #f77f00);
  color: #4e2c12;
  font-weight: 900;
  border: 2px solid #9e2a2b;
}

body.biscuit select:hover,
body.biscuit button:hover {
  background: linear-gradient(135deg, #ffe6a7, #ffd166);
}

/* CONTENT */
body.biscuit .content {
  background: linear-gradient(135deg, #fff1dc, #f3cfa6);
  border: 3px solid #9e2a2b;
  box-shadow: 0 10px 30px rgba(158, 42, 43, 0.3);
}

body.biscuit .content h2 {
  color: #9e2a2b;
  border-bottom: 3px solid #f77f00;
}

/* FOOTER */
body.biscuit footer {
  background: linear-gradient(135deg, #9e2a2b, #540b0e);
  border-top: 4px solid #ffd166;
}

body.biscuit footer p,
body.biscuit footer a {
  color: #fff;
}

/* =========================
   DARK THEME
========================= */
body.dark {
  background: #111;
  color: #fff;
}

body.dark nav a {
  color: #fff;
  font-weight: 700;
}

body.dark header {
  background: #1a1a1a;
}

body.dark .game {
  background: #222;
}

body.dark .box {
  background: #333;
  border: 2px solid #555;
}

body.dark .grid {
  background: #000;
}

body.dark .tile {
  background: #444;
}

body.dark footer {
  background: #1a1a1a;
  border-top: 2px solid #333;
}

body.dark footer p,
body.dark footer a {
  color: #aaa;
}

/* =========================
   NEON THEME
========================= */
body.neon {
  background: #000;
  color: #0ff;
}

body.neon nav a {
  color: #fff;
  font-weight: 700;
}

body.neon header {
  background: #001a1a;
  box-shadow: 0 0 20px #0ff;
}

body.neon .game {
  background: #001a1a;
  box-shadow: 0 0 20px #0ff;
}

body.neon .box {
  background: #003333;
  border: 2px solid #0ff;
  color: #0ff;
}

body.neon .grid {
  background: #000;
  border: 2px solid #0ff;
}

body.neon .tile {
  background: #001a1a;
  border: 1px solid #0ff;
  color: #0ff;
}

body.neon footer {
  background: #001a1a;
  border-top: 2px solid #0ff;
}

body.neon footer p,
body.neon footer a {
  color: #0ff;
}

/* Ensure menu links are white in dark/neon themes (header + footer) */
body.dark header nav a,
body.dark footer nav a,
body.neon header nav a,
body.neon footer nav a {
  color: #fff !important;
}

/* Tile animations */
.tile {
  transition: transform 180ms cubic-bezier(.2,.8,.2,1), box-shadow 180ms ease, background 180ms ease;
}

/* improved pop and merge animations */
@keyframes popIn {
  0% { transform: scale(0.2) translateY(6px); opacity: 0; filter: blur(2px); }
  55% { transform: scale(1.12) translateY(-2px); opacity: 1; filter: blur(0); }
  100% { transform: scale(1) translateY(0); }
}

@keyframes mergeBounce {
  0% { transform: scale(1); box-shadow: none; }
  35% { transform: scale(1.18); box-shadow: 0 8px 30px rgba(255,255,255,0.12); }
  65% { transform: scale(0.96); }
  100% { transform: scale(1); box-shadow: none; }
}

.tile.spawn {
  animation: popIn 260ms cubic-bezier(.2,.8,.2,1) both;
}

.tile.merge {
  animation: mergeBounce 360ms cubic-bezier(.2,.9,.2,1) both;
}

/* high value glow */
.tile.high {
  box-shadow: 0 8px 28px rgba(255,215,0,0.14), inset 0 -6px 12px rgba(0,0,0,0.15);
}

/* Game title contrast per theme */
body.dark .game-title,
body.neon .game-title {
  color: #fff;
  text-shadow: 2px 2px 6px rgba(0,0,0,0.6), 0 0 12px rgba(255,255,255,0.04);
}

/* =========================
   BISCUIT TILE PALETTE
========================= */

body.biscuit .tile[data-value="2"]    { background: #f7ead2; color:#5a3e1b; }
body.biscuit .tile[data-value="4"]    { background: #ffdb9a; color:#4e2c12; }
body.biscuit .tile[data-value="8"]    { background: #ffd54f; color:#4e2c12; }
body.biscuit .tile[data-value="16"]   { background: #ffb74d; color:#4e2c12; }
body.biscuit .tile[data-value="32"]   { background: #ff9800; color:#fff; }
body.biscuit .tile[data-value="64"]   { background: #f57c00; color:#fff; }
body.biscuit .tile[data-value="128"]  { background: #e65100; color:#fff; font-size:20px;}
body.biscuit .tile[data-value="256"]  { background: #bf360c; color:#fff; font-size:20px;}
body.biscuit .tile[data-value="512"]  { background: #8d1c00; color:#fff; font-size:20px;}
body.biscuit .tile[data-value="1024"] { background: #4e0d00; color:#ffd166; font-size:18px;}
body.biscuit .tile[data-value="2048"] {
  background: linear-gradient(135deg, #ffd700, #ff8f00);
  color:#4e2c12;
  box-shadow: 0 0 28px rgba(255,215,0,0.6);
}
/* =========================
   DARK TILE PALETTE
========================= */

body.dark .tile[data-value="2"]    { background:#cbcaca; color:#fff; }
body.dark .tile[data-value="4"]    { background:#e48a8a; color:#fff; }
body.dark .tile[data-value="8"]    { background:#ff7043; color:#fff; }
body.dark .tile[data-value="16"]   { background:#ff5722; color:#fff; }
body.dark .tile[data-value="32"]   { background:#f4511e; color:#fff; }
body.dark .tile[data-value="64"]   { background:#d84315; color:#fff; }
body.dark .tile[data-value="128"]  { background:#bf360c; color:#fff; font-size:20px;}
body.dark .tile[data-value="256"]  { background:#8e24aa; color:#fff; font-size:20px;}
body.dark .tile[data-value="512"]  { background:#5e35b1; color:#fff; font-size:20px;}
body.dark .tile[data-value="1024"] { background:#3949ab; color:#fff; font-size:18px;}
body.dark .tile[data-value="2048"] {
  background: linear-gradient(135deg,#ffd54f,#ff6f00);
  color:#111;
  box-shadow: 0 0 30px rgba(255,200,0,0.5);
}
/* =========================
   NEON TILE PALETTE
========================= */

body.neon .tile[data-value="2"]    { background:#8ccedf; color:#0ff; border:1px solid #0ff; }
body.neon .tile[data-value="4"]    { background:#06a2c9; color:#0ff; }
body.neon .tile[data-value="8"]    { background:#005577; color:#0ff; }
body.neon .tile[data-value="16"]   { background:#007799; color:#0ff; }
body.neon .tile[data-value="32"]   { background:#00aaff; color:#001; }
body.neon .tile[data-value="64"]   { background:#00ffaa; color:#001; }
body.neon .tile[data-value="128"]  { background:#39ff14; color:#001; font-size:20px;}
body.neon .tile[data-value="256"]  { background:#ff00ff; color:#fff; font-size:20px;}
body.neon .tile[data-value="512"]  { background:#ff0066; color:#fff; font-size:20px;}
body.neon .tile[data-value="1024"] { background:#ffea00; color:#001; font-size:18px;}
body.neon .tile[data-value="2048"] {
  background: linear-gradient(90deg,#ffffff,#00ffff);
  color:#001;
  box-shadow: 0 0 30px #0ff, 0 0 60px rgba(0,255,255,0.4);
}

/* =========================
   LAYOUT
========================= */
header {
  padding: 15px 12px;
  text-align: center;
}

nav {
  margin-top: 10px;
  display: flex;
  justify-content: center;
  gap: 6px;
  flex-wrap: wrap;
}

nav a {
  padding: 6px 12px;
  text-decoration: none;
  font-size: 13px;
  border-radius: 4px;
}

main {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 10px;
  gap: 20px;
}

.game-container {
  width: 100%;
  max-width: 360px;
}

.game {
  padding: 15px;
  border-radius: 12px;
}

.stats, .controls {
  display: flex;
  justify-content: space-between;
  gap: 20px;
  margin-bottom: 10px;
}

.box {
  padding: 8px;
  flex: 1;
  text-align: center;
  font-size: 12px;
}

.grid {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 8px;
  padding: 8px;
  border-radius: 10px;
  touch-action: none;
}

.tile {
  aspect-ratio: 1;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 24px;
  border-radius: 6px;
  transition: all 0.1s ease;
  transform-origin: center;
  border-radius: 8px;
  font-weight: 800;
  letter-spacing: 1px;

}


select, button {
  padding: 10px 16px;
  border-radius: 8px;
  border: none;
  cursor: pointer;
  font-size: 13px;
  font-weight: 700;
  transition: all 0.2s ease;
  box-shadow: 0 4px 8px rgba(0,0,0,0.15);
}

button {
  flex: 1;
}

/* CONTENT SECTION */
.content {
  max-width: 800px;
  width: 100%;
  margin: 20px auto;
  padding: 25px;
  border-radius: 12px;
  line-height: 1.8;
  font-size: 14px;
  box-shadow: 0 8px 24px rgba(0,0,0,0.1);
}

/* FOOTER */
footer {
  padding: 20px 12px;
  text-align: center;
  font-size: 13px;
}

/* MOBILE */
@media (max-width: 400px) {
  .tile { font-size: 20px; }
  .game-title { font-size: 36px; }
}
</style>
</head>

<body class="biscuit">

<header>
  <h1>2048 Play Online</h1>
  <nav>
    <a href="/">Game</a>
    <a href="/about.html">About</a>
    <a href="/privacy.html">Privacy</a>
    <a href="/terms.html">Terms</a>
    <a href="/contact.html">Contact</a>
  </nav>
</header>

<main>
  <div class="game-container">
    <div class="game" id="gameBox">

      <!-- BIG TITLE -->
      <div class="game-title">2048</div>

      <div class="stats">
        <div class="box">Score<br><span id="score">0</span></div>
        <div class="box">High<br><span id="high">0</span></div>
      </div>

      <div class="controls">
        <button id="undoBtn" disabled>Undo</button>
        <button id="restartBtn">Restart</button>
        <select id="themeSelect">
          <option value="biscuit">Biscuit</option>
          <option value="dark">Dark</option>
          <option value="neon">Neon</option>
        </select>
      </div>

      <div class="grid" id="grid"></div>
    </div>
  </div>

  <!-- SEO CONTENT -->
  <div class="content">
    <h2>How to Play 2048</h2>
    <p>2048 is a classic tile-merging puzzle game where players combine matching numbers to reach the 2048 tile. Use arrow keys on desktop or swipe on mobile to move tiles.</p>

    <h2>Tips to Win</h2>
    <ul>
      <li>Keep your highest tile in a corner.</li>
      <li>Plan moves ahead.</li>
      <li>Avoid blocking the grid.</li>
      <li>Build larger tiles systematically.</li>
    </ul>

    <h2>Why Play on 2048play.in?</h2>
    <p>Enjoy a fast, free, and mobile-friendly 2048 game with theme customization and high-score tracking. No downloads, no sign-ups â€” just play instantly.</p>
  </div>
</main>

<footer>
  <nav>
    <a href="index.html">Game</a> |
    <a href="about.html">About</a> |
    <a href="privacy.html">Privacy</a> |
    <a href="terms.html">Terms</a> |
    <a href="contact.html">Contact</a>
  </nav>
  <p>Play 2048 online free at 2048play.in. Merge tiles, beat your high score, and challenge your brain.</p>
  <p>&copy; 2026 2048play.in</p>
</footer>

<script>
/* =========================
   GAME LOGIC (UNCHANGED)
========================= */
const SIZE = 4;
let board = [];
let previousBoard = Array.from({ length: SIZE }, () => Array(SIZE).fill(0));
let score = 0;
let highScore = localStorage.getItem("high2048") || 0;

const grid = document.getElementById("grid");
const scoreDisplay = document.getElementById("score");
const highDisplay = document.getElementById("high");
const themeSelect = document.getElementById("themeSelect");
const restartBtn = document.getElementById("restartBtn");
const undoBtn = document.getElementById("undoBtn");

// single-step undo state
let undoState = null;

function saveUndo() {
  // deep copy board and scores
  undoState = {
    board: board.map(r => r.slice()),
    score: score,
    highScore: highScore
  };
  if (undoBtn) undoBtn.disabled = false;
}

function clearUndo() {
  undoState = null;
  if (undoBtn) undoBtn.disabled = true;
}

function init() {
  board = Array.from({ length: SIZE }, () => Array(SIZE).fill(0));
  score = 0;
  addTile();
  addTile();
  draw();
}

function addTile() {
  const empty = [];
  for (let i = 0; i < SIZE; i++) {
    for (let j = 0; j < SIZE; j++) {
      if (board[i][j] === 0) empty.push([i, j]);
    }
  }
  if (!empty.length) return;
  const [x, y] = empty[Math.floor(Math.random() * empty.length)];
  board[x][y] = Math.random() < 0.9 ? 2 : 4;
}

function draw() {
  grid.innerHTML = "";
  scoreDisplay.textContent = score;
  highDisplay.textContent = highScore;

  for (let i = 0; i < SIZE; i++) {
    for (let j = 0; j < SIZE; j++) {
      const tile = document.createElement("div");
      tile.className = "tile";
      tile.dataset.value = board[i][j];
      tile.textContent = board[i][j] === 0 ? "" : board[i][j];
      // Add animation classes based on change from previousBoard
      const prev = previousBoard[i] ? previousBoard[i][j] : 0;
      const curr = board[i][j];
      if (curr !== 0) {
        if (prev === 0) {
          tile.classList.add('spawn');
        } else if (curr > prev) {
          tile.classList.add('merge');
        }
        if (curr >= 2048) tile.classList.add('high');
      }

      // cleanup animation classes after animation ends
      tile.addEventListener('animationend', () => {
        tile.classList.remove('spawn', 'merge');
      });

      grid.appendChild(tile);
    }
  }

  // Save snapshot for next draw comparisons
  previousBoard = board.map(r => r.slice());
}

function compress(row) {
  const newRow = row.filter(n => n !== 0);
  while (newRow.length < SIZE) newRow.push(0);
  return newRow;
}

function merge(row) {
  for (let i = 0; i < SIZE - 1; i++) {
    if (row[i] === row[i + 1] && row[i] !== 0) {
      row[i] *= 2;
      score += row[i];
      if (score > highScore) {
        highScore = score;
        localStorage.setItem("high2048", highScore);
      }
      row[i + 1] = 0;
    }
  }
  return row;
}

function moveLeft() {
  let moved = false;
  for (let i = 0; i < SIZE; i++) {
    let row = compress(board[i]);
    row = merge(row);
    row = compress(row);
    if (row.toString() !== board[i].toString()) moved = true;
    board[i] = row;
  }
  return moved;
}

function reverse() { board = board.map(r => r.reverse()); }
function transpose() { board = board[0].map((_, i) => board.map(r => r[i])); }

function moveRight() { reverse(); const m = moveLeft(); reverse(); return m; }
function moveUp() { transpose(); const m = moveLeft(); transpose(); return m; }
function moveDown() { transpose(); const m = moveRight(); transpose(); return m; }

function gameOver() {
  for (let i = 0; i < SIZE; i++) {
    for (let j = 0; j < SIZE; j++) {
      if (board[i][j] === 0) return false;
      if (i < SIZE - 1 && board[i][j] === board[i + 1][j]) return false;
      if (j < SIZE - 1 && board[i][j] === board[i][j + 1]) return false;
    }
  }
  return true;
}

// Keyboard
document.addEventListener("keydown", e => {
  if (["ArrowLeft","ArrowRight","ArrowUp","ArrowDown"].includes(e.key)) {
    e.preventDefault();
  }
  // only act on movement keys
  const key = e.key;
  const isMoveKey = ["ArrowLeft","ArrowRight","ArrowUp","ArrowDown","a","A","w","W","s","S","d","D"].includes(key);
  if (!isMoveKey) return;

  // save undo snapshot
  saveUndo();

  let moved = false;
  if (["ArrowLeft","a","A"].includes(key)) moved = moveLeft();
  if (["ArrowRight","d","D"].includes(key)) moved = moveRight();
  if (["ArrowUp","w","W"].includes(key)) moved = moveUp();
  if (["ArrowDown","s","S"].includes(key)) moved = moveDown();

  if (moved) {
    addTile();
    draw();
    if (gameOver()) alert("Game Over! Final Score: " + score);
  } else {
    // no change -> clear saved undo
    clearUndo();
  }
});

// Mobile Swipe
let startX = 0, startY = 0;

grid.addEventListener("touchstart", e => {
  startX = e.touches[0].clientX;
  startY = e.touches[0].clientY;
}, false);

grid.addEventListener("touchend", e => {
  const dx = e.changedTouches[0].clientX - startX;
  const dy = e.changedTouches[0].clientY - startY;
  const minSwipe = 30;
  let moved = false;
  if (Math.abs(dx) > Math.abs(dy)) {
    if (dx > minSwipe) {
      saveUndo();
      moved = moveRight();
    }
    else if (dx < -minSwipe) {
      saveUndo();
      moved = moveLeft();
    }
  } else {
    if (dy > minSwipe) {
      saveUndo();
      moved = moveDown();
    }
    else if (dy < -minSwipe) {
      saveUndo();
      moved = moveUp();
    }
  }

  if (moved) {
    addTile();
    draw();
    if (gameOver()) alert("Game Over! Final Score: " + score);
  } else {
    clearUndo();
  }
});

// Theme (SAFE SWITCH)
themeSelect.addEventListener("change", () => {
  document.body.classList.remove("biscuit","dark","neon");
  document.body.classList.add(themeSelect.value);
});

restartBtn.addEventListener("click", () => { init(); clearUndo(); });
undoBtn && undoBtn.addEventListener('click', () => {
  if (!undoState) return;
  board = undoState.board.map(r => r.slice());
  score = undoState.score;
  highScore = undoState.highScore;
  localStorage.setItem("high2048", highScore);
  draw();
  clearUndo();
});
init();
</script>

</body>
</html>
